"use strict";var goodwillApp=angular.module("goodwillApp",["infinite-scroll","wu.masonry"]),urlPrefix="http://goodwillapi.herokuapp.com/";goodwillApp.controller("AuctionController",function(e,t,r){var a=new r(e);e.auctions=a,e.favorite=function(){console.log("click")},e.search={},e.search.seller=localStorage.seller?localStorage.seller:12,e.search.category=localStorage.category?localStorage.category:0,e.clear=function(){e.search.term="",e.submit()},e.submit=function(){a.empty=!1,a.busy=!1,a.atend=!1,a.page=1,a.items=[],a.term=this.search.term,a.seller=this.search.seller,a.category=this.search.category,a.getPage(e),localStorage.category=this.search.category,localStorage.seller=this.search.seller},e.submit()}),goodwillApp.factory("AuctionsFactory",function(e){var t=function(){this.items=[],this.busy=!1,this.page=1,this.empty=!1,this.atend=!1};return t.prototype.getPage=function(){if(!this.atend){var t={seller:this.seller,cat:this.category,page:this.page,term:this.term};if(this.busy)return void console.log("cant you see I'm busy?");this.busy=!0;var r=this,a=urlPrefix+"search?callback=JSON_CALLBACK",o={params:t,cache:!1};e.jsonp(a,o).success(function(e){r.atend=!1,r.empty=!1,e.length<25&&(r.atend=!0);for(var t=0;t<e.length;t++)r.items.push(e[t]);r.page=r.page+1,r.busy=!1}).error(function(){r.empty=!0,r.atend=!0,r.busy=!1})}},t});