"use strict";var goodwillApp=angular.module("goodwillApp",["infinite-scroll","wu.masonry"]),urlPrefix="http://goodwillapi.herokuapp.com/",searchNav=document.querySelector("header");Headroom.options={tolerance:{up:5,down:0},offset:40,classes:{initial:"headroom",pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top"}};var headroom=new Headroom(searchNav);headroom.init(),goodwillApp.controller("AuctionController",function(e,o,t){var r=new t(e);e.auctions=r,e.favorite=function(){console.log("click")},e.search={},e.search.seller=localStorage.seller?localStorage.seller:12,e.search.category=localStorage.category?localStorage.category:0,e.clear=function(){e.search.term="",e.submit()},e.submit=function(){r.empty=!1,r.busy=!1,r.atend=!1,r.page=1,r.items=[],r.term=this.search.term,r.seller=this.search.seller,r.category=this.search.category,r.getPage(e),localStorage.category=this.search.category,localStorage.seller=this.search.seller},e.submit()}),goodwillApp.factory("AuctionsFactory",function(e){var o=function(){this.items=[],this.busy=!1,this.page=1,this.empty=!1,this.atend=!1};return o.prototype.getPage=function(){if(!this.atend){var o={seller:this.seller,cat:this.category,page:this.page,term:this.term};if(this.busy)return void console.log("cant you see I'm busy?");this.busy=!0;var t=this,r=urlPrefix+"search?callback=JSON_CALLBACK",a={params:o,cache:!1};e.jsonp(r,a).success(function(e){t.atend=!1,t.empty=!1,e.length<25&&(t.atend=!0);for(var o=0;o<e.length;o++)t.items.push(e[o]);t.page=t.page+1,t.busy=!1}).error(function(){t.empty=!0,t.atend=!0,t.busy=!1})}},o});